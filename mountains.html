<html>
	<head>
		<style>
			table {
				border: 1px solid blue;
			}
			td {
				font-size: 10px;
			}
		</style>
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
		<script type="text/javascript" src="/underscore-min.js"></script>
		<script type="text/javascript" src="/mountain-generator.js"></script>
		<script>
			$(function() {

				var mountain = new MountainGenerator({
					resolution : 5,
					randomness : 60,
					seed : 100,
				}).generate();
				console.log("MOUNTAIN", mountain);

				var getMax = function(grid) {
		            return Math.max.apply(null, grid.map(function(row) {
		                return Math.max.apply(null, row);
		            }));
		        };

				var drawGrid = function(grid) {
		            var max = getMax(grid);
		            var table = $('<table>').appendTo($('.viz'));
		            for(var y = 0; y < grid.length; y++) {
		                var tr = $('<tr>').appendTo(table);
		                for(var x = 0; x < grid.length; x++) {
		                    var val = grid[y][x];
		                    var color = val !== null ? Math.round(val * 255 / max) : 255;
		                    // console.log("vAL:", val);
		                    // console.log("COLOR: ", color);
		                    var c = 'rgb(' + [color, color, color].join(',') + ')';
		                    var s = val ? val.toFixed(2) : val;
		                    $('<td>').text(s).appendTo(tr).css({
		                        'background-color' : c
		                    });
		                }
		            }
		        };

		        drawGrid(mountain);


			});
		</script>
	</head>
	<body>
		<div class="viz">
		</div>
		<canvas id="stage">
		</canvas>
	</body>
</html>